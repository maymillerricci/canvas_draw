<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>May's Canvas</title>
		<link rel="stylesheet" href="canvas.css">
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
		<script>

			//set all variables
			var canvasWidth = 600;
			var canvasHeight = 400;
			var clickX = new Array();
			var clickY = new Array();
			var clickDrag = new Array();
			// var paint;
			var colorPurple = '#660099';
			var colorBlue = '#3333CC';
			var colorGreen = '#336633';
			var colorYellow = '#FFFF33';
			var colorPink = '#CC0099';
			var curColor = colorPurple;
			var clickColor = new Array();
			var curSize = 10;
			var clickSize = new Array();

			$(document).ready(function() {

				// //mouse cursor test
				// // $(document).on('click', '#purple', function() {
				// $('body').css('cursor', 'crosshair'); 
				// // });

				// $('#canvas:active').css('cursor', 'crosshair'); 
				
				// $(document).on('mousedown', '#canvas', function() {
				// 	$('#canvas').css('cursor', 'crosshair'); 
				// });
				// $(document).on('mousemove', '#canvas', function() {
				// 	$('#canvas').css('cursor', 'crosshair'); 
				// });

				//set height and width of canvas
				$('#canvas').attr({
					width: canvasWidth,
					height: canvasHeight
				});

				//set 2d context
				context = document.getElementById('canvas').getContext('2d');

				//drawing - on mousedown
				$(document).on('mousedown', '#canvas', function(e) {
					e.preventDefault();
					var mouseX = e.pageX - this.offsetLeft;
					var mouseY = e.pageY - this.offsetTop;
					paint = true;
					addClick(e.pageX - this.offsetLeft, e.pageY - this.offsetTop);
					redraw();
				});

				//drawing - on mousemove
				$(document).on('mousemove', '#canvas', function(e) {
					if(paint) {
						addClick(e.pageX - this.offsetLeft, e.pageY - this.offsetTop, true);
						redraw();
					}
				});

				//drawing - on mouseup
				$(document).on('mouseup', '#canvas', function(e) {
					paint = false;
				});

				//drawing - on mouse leaving the canvas
				$(document).on('mouseleave', '#canvas', function(e) {
					paint = false;
				});

				//drawing - on mouse re-entering the canvas - WORK ON THIS!!!
				// $(document).on('mouseenter', '#canvas', function(e) {
				// 	paint = true;
				// });

				//add click function
				function addClick(x, y, dragging)
				{
					clickX.push(x);
					clickY.push(y);
					clickDrag.push(dragging);
					clickColor.push(curColor);
					clickSize.push(curSize);
				}

				//redraw function
				function redraw() {
					context.clearRect(0, 0, canvasWidth, canvasHeight);
					context.lineJoin = "round";
					for(var i=0; i<clickX.length; i++) {
						context.beginPath();
						if(clickDrag[i] && i) {
							context.moveTo(clickX[i-1], clickY[i-1]);
						} else {
							context.moveTo(clickX[i]-1, clickY[i]);
						}
						context.lineTo(clickX[i], clickY[i]);
						context.closePath();
						context.strokeStyle = clickColor[i];
						context.lineWidth = clickSize[i];
						context.stroke();
					}
				}

				//change current color when click on colors in color picker
				$(document).on('click', '#purple', function() {
					curColor = colorPurple;
				});
				$(document).on('click', '#blue', function() {
					curColor = colorBlue;
				});
				$(document).on('click', '#green', function() {
					curColor = colorGreen;
				});
				$(document).on('click', '#yellow', function() {
					curColor = colorYellow;
				});
				$(document).on('click', '#pink', function() {
					curColor = colorPink;
				});

				//change current font weight when click on options in font weight picker
				$(document).on('click', '#small', function() {
					curSize = 5;
				});
				$(document).on('click', '#normal', function() {
					curSize = 15;
				});
				$(document).on('click', '#large', function() {
					curSize = 25;
				});
				$(document).on('click', '#huge', function() {
					curSize = 35;
				});

				//change color of font weight options depending on current color
				$(document).on('click', '.color_choice', function() {
					if(curColor==colorPurple) {
						$('.line').css('background-color', colorPurple);
					} else if(curColor==colorBlue) {
						$('.line').css('background-color', colorBlue);
					} else if(curColor==colorGreen) {
						$('.line').css('background-color', colorGreen);
					} else if(curColor==colorYellow) {
						$('.line').css('background-color', colorYellow);
					} else if(curColor==colorPink) {
						$('.line').css('background-color', colorPink);
					}
				});
				
				//clear canvas when click clear button (confirm first)
				$(document).on('click', '#clear', function() {
					if(confirm('Are you sure you want to clear the canvas?')) {
						clearCanvas();
					}
				});

				//clear canvas function - clears canvas and resets all arrays
				function clearCanvas()
				{
					context.clearRect(0, 0, canvasWidth, canvasHeight);
					clickX.length = 0;
					clickY.length = 0;
					clickDrag.length = 0;
					clickColor.length = 0;
					clickSize.length = 0;
				}
			});
		</script>
	</head>
	<body>
		<!-- canvas -->
		<canvas id="canvas" width="600" height="400"></canvas> 
		<!-- color picker -->
		<div id="color_picker">
			<div class="color_choice" id="purple"></div>
			<div class="color_choice" id="blue"></div>
			<div class="color_choice" id="green"></div>
			<div class="color_choice" id="yellow"></div>
			<div class="color_choice" id="pink"></div>
			<button id="clear">Clear</button>
		</div>
		<!-- font weight picker -->
		<div id="weight_picker">
			<div class="line_choice" id="small"><div class="line" id="line_small"></div></div>
			<div class="line_choice" id="normal"><div class="line" id="line_normal"></div></div>
			<div class="line_choice" id="large"><div class="line" id="line_large"></div></div>
			<div class="line_choice" id="huge"><div class="line" id="line_huge"></div></div>
		</div>



	</body>
</html>